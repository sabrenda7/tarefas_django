{% extends 'projetos/base.html' %}
{% block title %}Tarefas{% endblock %}

{% block content %}
<h2>ğŸ“ {{ projeto.nome }}</h2>

<a href="{% url 'nova_tarefa' projeto.id %}" class="btn btn-primary mb-3">
    + Nova Tarefa
</a>

<ul class="list-group">
    {% for tarefa in tarefas %}
    <li class="list-group-item d-flex justify-content-between align-items-center">

        <span>
            {{ tarefa.titulo }}

            {# --- Funcionalidade adicionada pelo Integrante 1: Status da tarefa --- #}
            â€”
            <strong>{{ tarefa.get_status_display }}</strong>

            {# --- Funcionalidade adicionada pelo Integrante 2: Data de entrega --- #}
            {% if tarefa.data_entrega %}
                <small class="text-muted ms-2">
                    (Entrega: {{ tarefa.data_entrega|date:"d/m/Y" }})
                </small>
            {% endif %}
        </span>

        {# --- Ajuste visual e padronizaÃ§Ã£o (Integrante 3 â€“ Bootstrap/UI) --- #}
        <a href="{% url 'editar_tarefa' tarefa.id %}"
           class="btn btn-sm
           {% if tarefa.status == 'P' %}btn-outline-secondary
           {% elif tarefa.status == 'E' %}btn-outline-warning
           {% else %}btn-outline-success{% endif %}">
            AvanÃ§ar status
        </a>

    </li>
    {% empty %}
    <li class="list-group-item text-muted">
        Nenhuma tarefa cadastrada.
    </li>
    {% endfor %}
</ul>

<a href="{% url 'lista_projetos' %}" class="btn btn-link mt-3">
    â† Voltar para projetos
</a>
{% endblock %}